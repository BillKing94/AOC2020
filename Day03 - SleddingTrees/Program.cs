using System;
using System.Linq;

namespace Day03
{
    class Program
    {
        private const string input = @"...#.....#.......##......#.....
                               ...#..................#........
                               ....##....#.......#............
                               .........#.......#.......#.....
                               ..#..............#.........#..#
                               .....#.........#....#....#....#
                               ....##..........#.#.##.........
                               ...#....##...#...#...#.#..#....
                               ...#.......###..........#......
                               .........#.....#....#...#.#....
                               .#...###..#..##..#.........###.
                               #.#...#..........###...#....#..
                               #....#.#..#..........#.......#.
                               .#..#........##.#..............
                               ............#..#.#............#
                               .............#..........#......
                               ...#.......#...............#...
                               .#...#..#..#............#..#...
                               ....##.##..................#.##
                               #......#...#..##....#.....#...#
                               #..#..........##....#...###....
                               ##......#.##.#......#..#......#
                               ....#...#.......##.##...#.#..#.
                               ##.#...#....#...#...#........#.
                               ........#..#.....#....#.......#
                               .#......#......#..............#
                               .#.....#..#..#..#..#..#....#..#
                               .......#.....#.................
                               .#......#...#..#..#...#...#....
                               .........#..#..#.........#.....
                               .....#.........#.#..........#..
                               #......#....#....##....#.#.#...
                               ................##.#...........
                               .....##.....#............#.#...
                               ...........#...#.#..##...#.....
                               .......#....##.......#..#....#.
                               .##......##....#....####.##..#.
                               .....#.##.....#...#....##......
                               .............#....#......#....#
                               #.#.#.###........#.#....#.#....
                               .##...........#................
                               #..#..#...##..##.##...#..#.#...
                               ..#......##..#.#......#..#.#.#.
                               .....#..............#......#...
                               #.#..##.##...#............##...
                               .#......#.............#........
                               ........##....#......#..#......
                               ##.........##....#..........#..
                               ..#..#....#.........##....#..#.
                               ........#..#..#........#...#...
                               #.........#......##.#...#.##...
                               .##.............#..###....#.##.
                               .##.#....#.......#.............
                               #..##.#.........#..##.#......##
                               ....#..#.......................
                               .#.#.........#...............#.
                               ....#......#.#..##..#...#.#..#.
                               #....##...##..#.......##.....##
                               ....##...##...#....#.....#..#..
                               .#......#.#.#.#......##..#..#..
                               .....##..#..#.....#.....#...##.
                               ....###................#..#.#..
                               .....#..#..#.#..........#..#...
                               ...#.....#............#........
                               #.............#...#..#.....#..#
                               #........#.....#.#..#......#...
                               ...#.##.....#.#..#.........#..#
                               .......##...#..#.#....##.......
                               ..................#..##..#.#.#.
                               ..#......#..#..#.....#...#.#...
                               .#.......#.....#.#....#.#......
                               ##..#.#....#.###..#...#.......#
                               .......................#.......
                               ..###..........#..##.##.#...##.
                               .....#...#....###.........#..#.
                               ..#.....#....###...............
                               ....#.......#........#....#..#.
                               ......#................#.#...##
                               #.....#.......#..#..........##.
                               #.#....##.........#.....#.#....
                               #.#.#...#............####.##..#
                               .....#....####........#...#..#.
                               ....##........#.#..............
                               .#......#..#..##......#....#.##
                               ..#....#.#........#..#....#....
                               .#...#.##...#.#.....#.....#...#
                               ..........#................###.
                               .....#..........##..#..........
                               .....#..................#...#..
                               #......##....#.#...#..#.......#
                               ..#......##....#......#.#...#..
                               ###.#..###.#.#..#...#....#.....
                               #.....#.#...#.##...#........#..
                               #..........................#...
                               .#.#.....#.#.#.......##.#.#....
                               .#....#..##......#....#........
                               .#.......#.##......#.#..#......
                               ............#.....#....##.##...
                               ....##........##......#........
                               ....#......##....##.....#......
                               ..#.#.....#......#...#.#.......
                               .###.........#...#........#....
                               ......#.#...##.....##..##..#...
                               ...#...#.#......#..##..#.......
                               .##....#.#........#.#..........
                               #....#.#......#......#.#.#.....
                               #.....#.....#................##
                               ...........#....#...#...#......
                               ..........##..##..#...##.......
                               .##......#.......#..#.#..##....
                               ..........##....#....#..#.#....
                               ...............#......#.....##.
                               .#...#....................#..#.
                               .............###...............
                               .####..............#...#.......
                               ....#...#.#...#...#....#.......
                               .......#.#.....................
                               ...............................
                               #..#.........##.......#.#.#....
                               ....##...#...........#......#..
                               ........##...#......#..........
                               ....#.#.....#..#......#........
                               #..#................#..#.##....
                               .#........#.......#.........##.
                               #...........#...#...#......#.#.
                               ..#.#.#..........##.##...#...#.
                               ..#...#.##...#.#...........#...
                               ##...........##...##...##......
                               ....#....##...#......#..#.....#
                               #..#.#.#..#...#...#....#.......
                               ............#.....#....#....#.#
                               ....##.....#.........#......#..
                               .....##.......#...#...#.###....
                               ...##......##..###.#.#....#....
                               #.#.#.#..#.#.........#...#...##
                               ..#..........#.................
                               ....##....#....................
                               ###.#...............##...##.#..
                               ....#.......##.#..#.#..........
                               ............##..#.......##.....
                               #...#.........#..#..#..#...#...
                               ..#......##..#.#...##.#.......#
                               ......#................#...#...
                               ......#..###............#.#....
                               ..#.#...###...#..#...#......##.
                               ...#.##...##............#......
                               #...##........#.#..#.......#...
                               #..#.....#..#.##...............
                               ..#.....#.#....#.........#.....
                               .............#....#..#...#.##..
                               ..#.#.....................##.#.
                               ........#.......#..#.#.........
                               ##..............#.....#.......#
                               .#.##...###....#.....#..##.#...
                               #..#...#..#......#..........###
                               #...........#..#...#....#....#.
                               ....#..#.......##......#......#
                               #...#.#...............##...#...
                               ...##.#..##.......##..#........
                               ...........##..........#.......
                               ..#....#..##...#......#.#......
                               .#.#....#.#.#...#.#............
                               .#.#..#...##.......#.#.........
                               ...#...#.............#.######..
                               ##.#........###.......#....#.#.
                               .#....#.....#.#........#......#
                               ..#.#.........#..........##.#..
                               .#....#.#..............#......#
                               .....#..##.........#..##..#....
                               ........#..#....#.......#.....#
                               #.#.......#.....#.##.#...#....#
                               ...#...##...#....#.....#....#.#
                               #..##....#..........#..#.......
                               .......#.#.....#...#.#.#.....##
                               #...#...#..#......##.#..#......
                               ...#.......#....#...........#.#
                               ##.......#####.#.........#..#..
                               ....#.#...................##...
                               ......#..##............#.......
                               #.........#....#####.#.#..#.#..
                               ..#......#.#.##............#...
                               ..#...#.....#.#....#......#....
                               .#...#....#....#.#.#......#.#..
                               ..#.##.....#..........#...#.#..
                               .......#...#.............#...#.
                               .#.........#.....#.#........##.
                               #....#..#..........##.......##.
                               ...#....#.#.........#.......###
                               ......#....#.#......#.......#..
                               .....#...#...#.#...##..#.#.....
                               #.........##..#...##..#.#....#.
                               ...#......#.#......##.....#....
                               .#####.....#.#.#.#...###.##....
                               ..#................#.#...#.#...
                               #.......##...#.........##..#...
                               ..#.....#....##............#...
                               #............##...............#
                               ..#..#.................#.......
                               ...............#..#.......##...
                               ..##..#....#...##..........#..#
                               #...###....##.#.......#.....#..
                               ..........#.........#..#......#
                               ##....#.....#...##.......#.....
                               ..#..#.......#.................
                               ..#..##......#.........#......#
                               ...........##.#..#......#.#..#.
                               ..#...##...##......#...#...#.#.
                               .#..#.....#.........#..........
                               #..##...#............#..#.#....
                               ..#...#...##.#........#....#.#.
                               ......##..###.#....#........#..
                               .....#..#....##...##..........#
                               ................#.#.#.....#..#.
                               #.##...#......#.#..#.......###.
                               .......#.#..#..#......#..##..#.
                               .##...#...#....#....#.......#..
                               ......#..#....#.#.###.....#.#.#
                               #....#.#...#......#.#.....#..#.
                               .......#.#...#.#.#............#
                               #.....#..#...#.................
                               .....#..........#..#.#..#.#....
                               .........#......#.#.........###
                               ..#.###........#....##.#.......
                               .#.......#.#......#........#..#
                               ............#........#.....#...
                               ......#......#....#.#....#.....
                               .#.......#.....#.##.#..#...#..#
                               ##.....#...#..........##..#...#
                               .#........#....#...#....##.#...
                               ...#.#.......#.#....#.#...#...#
                               ........#.#.....#.##...#.#.#...
                               ...........#....#..#.........#.
                               ......#.#..#..##...#.......#...
                               ...#....#..#..#.##...........##
                               .#..#.#.#......#....##...#.....
                               ......#..#........#...##.......
                               .............#...##.#.....#...#
                               ....#...............##......#.#
                               .#...........#.........###.##.#
                               ....##........##...#.##.....#..
                               #......##........#...........#.
                               ###.#.................#.....#..
                               .....##..#.........#......##.#.
                               #.#.......##.#..#...#...#......
                               ...#.#..##.....#....##.....#.#.
                               ...##..#...#........#.#..#..#..
                               ...........#....#...#...##.....
                               ##.......#...#.#.##...##..#.#..
                               #....#.#..##...................
                               .#...................#.#..#....
                               #.....#..........#..#...#...#..
                               ...#..#............#.#.........
                               ............#..##.....##......#
                               #....#.........#.#..#..........
                               ...#.#................#....#.#.
                               ..#..#...#...#.#.#...#.#.#.....
                               ..#.......#.............##..#.#
                               #........#.#.###.#...#..#.###..
                               .......#......#..#.....####...#
                               ..##....#..#...................
                               ....##.#....#......#.#..#..#..#
                               #...........##...#.#.##..###...
                               ##.##......#...........#....#..
                               .#....#....#..#..#...##...#....
                               ...##.#.#......#...............
                               .....##.##...#...........#.....
                               ....#...#.#.........##.#....#.#
                               #..#...........#......#........
                               ..#..#.....#....#.##.......#..#
                               ..#.......##.....##.......#...#
                               .#.##.#..#...............#....#
                               .........#...........#.........
                               ..........##......#.#..........
                               ..#........###....#..#...#...#.
                               ....#.#...#.....#..#....#......
                               ..##...##...#..#..##......##..#
                               ..#..#......#....#....#...#..##
                               ...#...............#..#........
                               ....##..#...#......#........#..
                               ###.....##.......#.............
                               .#.#.##........##..#...#.......
                               .....###............#..#..#....
                               .#....##.#...####........#.....
                               ............#.#.....##....#.#..
                               ....#..........#...#...........
                               ........#.#...#..##...........#
                               #.......#..#.......###...#....#
                               #....#..#......#.....#...##.#..
                               ..#.............#.#.###...##..#
                               .#.#....#...#.....#...#.......#
                               .##.#..#.........#..#......#...
                               #....#...#......#.....#.....#..
                               ...........#....#.......##...#.
                               #.#..##....#....#.#.......#.#..
                               ..............#.#..##.##.......
                               ....#........#......#....#.#...
                               ......#.....................#..
                               #..##...##.....#.........#.....
                               #.....#.....#....#...#.....#...
                               ........###...........#...#....
                               ............#.....#...##....#..
                               .......#.......#...#.#...##....
                               ..#.#..#....#...#...#....#.....
                               ..........#.#....#....###....#.
                               .##...#......###..#............
                               ...#...#........#....#....##...
                               ##.....#.##...#.#...........#.#
                               ..........#.#....#...##.#...#..
                               ..#....#.#...#...#....#.###....
                               ......#.##..#..#.........#.###.
                               #.#.#.....#.....##.......#.....
                               ...#..#..#....#.#....#....#....
                               ##..#.#................#......#
                               .....#...#..#......#..####.....
                               .....##.....#....####......#...
                               ..........##..###.#....#.....##
                               ###...#.......#......##...#....
                               .......##...#...#..#.##.#....##
                               .....##.....##...##.....#..#..#
                               ......#.#.....#...#....#...#...
                               ..##........#...#..............
                               ..#........#.##.........#...#..
                               #....#....#................#...";

        static void Main(string[] args)
        {
            var lines = input.Split("\n").Select(l => l.Trim()).ToArray();

            (int x, int y)[] slopes = new[]
            {
                (1, 1),
                (3, 1),
                (5, 1),
                (7, 1),
                (1, 2)
            };

            var result = 1;

            foreach (var slope in slopes)
            {
                var pos = (x: 0, y: 0);

                int nTrees = 0;
                while (pos.y < lines.Length)
                {
                    var item = lines[pos.y][pos.x];
                    // Console.WriteLine(item);

                    if (item == '#')
                    {
                        nTrees++;
                    }

                    pos = ((pos.x + slope.x) % lines[0].Length, pos.y + slope.y);
                }

                result *= nTrees;
            }
            
            Console.WriteLine(result);

        }
    }
}